---
import { actions } from "astro:actions";
const user = Astro.locals.user;
---

<nav class="bg-white border-b border-indigo-100 shadow-sm">
  <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-18 py-4">
      <div class="flex items-center">
        <h1
          class="text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"
        >
          Tableau de bord
        </h1>
      </div>
      <div class="flex items-center space-x-6">
        <div class="flex items-center space-x-4">
          <div class="text-sm">
            {
              user ? (
                <div class="flex flex-col items-end">
                  <p class="font-medium text-gray-800">{user.fullName}</p>
                  <p class="text-xs text-indigo-600">{user.email}</p>
                </div>
              ) : (
                <p class="text-xs text-gray-500">User not authenticated</p>
              )
            }
          </div>
          <form
            method="POST"
            action={actions.logout}
            data-astro-reload
            data-astro-history="replace"
          >
            <input type="hidden" name="userId" value={user?.userId} />
            <button
              type="submit"
              class="bg-indigo-100 text-indigo-700 px-5 py-2.5 rounded-xl hover:bg-indigo-200 transition-colors font-medium"
            >
              DÃ©connexion
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</nav>
